!function(t){var i={tooltip:{show:!1,cssClass:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,snap:!0,lines:!1,onHover:function(t,i){},$compat:!1}};i.tooltipOpts=i.tooltip;var o=function(t){this.tipPosition={x:0,y:0},this.init(t)};o.prototype.init=function(i){function o(t){var o={};o.x=t.pageX,o.y=t.pageY,i.setTooltipPosition(o)}function e(o,e,a){var n=function(t,i,o,e){return Math.sqrt((o-t)*(o-t)+(e-i)*(e-i))},r=function(t,i,o,e,s,a,r){if(!r||(r=function(t,i,o,e,s,a){if(void 0!==o)return{x:o,y:i};if(void 0!==e)return{x:t,y:e};var n,r=-1/((a-e)/(s-o));return{x:n=(s*(t*r-i+e)+o*(t*-r+i-a))/(r*(s-o)+e-a),y:r*n-r*t+i}}(t,i,o,e,s,a),r.x>=Math.min(o,s)&&r.x<=Math.max(o,s)&&r.y>=Math.min(e,a)&&r.y<=Math.max(e,a))){var p=e-a,l=s-o,d=o*a-e*s;return Math.abs(p*t+l*i+d)/Math.sqrt(p*p+l*l)}var x=n(t,i,o,e),c=n(t,i,s,a);return x>c?c:x};if(a)i.showTooltip(a,s.tooltipOptions.snap?a:e);else if(s.plotOptions.series.lines.show&&!0===s.tooltipOptions.lines){var p=s.plotOptions.grid.mouseActiveRadius,l={distance:p+1},d=e;t.each(i.getData(),function(t,o){for(var a=0,p=-1,x=1;x<o.data.length;x++)o.data[x-1][0]<=e.x&&o.data[x][0]>=e.x&&(a=x-1,p=x);if(-1===p)return void i.hideTooltip();var c={x:o.data[a][0],y:o.data[a][1]},h={x:o.data[p][0],y:o.data[p][1]},u=r(o.xaxis.p2c(e.x),o.yaxis.p2c(e.y),o.xaxis.p2c(c.x),o.yaxis.p2c(c.y),o.xaxis.p2c(h.x),o.yaxis.p2c(h.y),!1);if(u<l.distance){var y=n(c.x,c.y,e.x,e.y)<n(e.x,e.y,h.x,h.y)?a:p,m=(o.datapoints.pointsize,[e.x,c.y+(h.y-c.y)*((e.x-c.x)/(h.x-c.x))]);l={distance:u,item:{datapoint:m,dataIndex:y,series:o,seriesIndex:t}},s.tooltipOptions.snap&&(d={pageX:o.xaxis.p2c(m[0]),pageY:o.yaxis.p2c(m[1])})}}),l.distance<p+1?i.showTooltip(l.item,d):i.hideTooltip()}else i.hideTooltip()}var s=this,a=t.plot.plugins.length;if(this.plotPlugins=[],a)for(var n=0;a>n;n++)this.plotPlugins.push(t.plot.plugins[n].name);i.hooks.bindEvents.push(function(i,a){s.plotOptions=i.getOptions(),"boolean"==typeof s.plotOptions.tooltip&&(s.plotOptions.tooltipOpts.show=s.plotOptions.tooltip,s.plotOptions.tooltip=s.plotOptions.tooltipOpts,delete s.plotOptions.tooltipOpts),!1!==s.plotOptions.tooltip.show&&void 0!==s.plotOptions.tooltip.show&&(s.tooltipOptions=s.plotOptions.tooltip,s.tooltipOptions.$compat?(s.wfunc="width",s.hfunc="height"):(s.wfunc="innerWidth",s.hfunc="innerHeight"),s.getDomElement(),t(i.getPlaceholder()).bind("plothover",e),t(a).bind("mousemove",o))}),i.hooks.shutdown.push(function(i,s){t(i.getPlaceholder()).unbind("plothover",e),t(s).unbind("mousemove",o)}),i.setTooltipPosition=function(i){var o=s.getDomElement(),e=o.outerWidth()+s.tooltipOptions.shifts.x,a=o.outerHeight()+s.tooltipOptions.shifts.y;i.x-t(window).scrollLeft()>t(window)[s.wfunc]()-e&&(i.x-=e),i.y-t(window).scrollTop()>t(window)[s.hfunc]()-a&&(i.y-=a),isNaN(i.x)?s.tipPosition.x=s.tipPosition.xPrev:(s.tipPosition.x=i.x,s.tipPosition.xPrev=i.x),isNaN(i.y)?s.tipPosition.y=s.tipPosition.yPrev:(s.tipPosition.y=i.y,s.tipPosition.yPrev=i.y)},i.showTooltip=function(t,o,e){var a=s.getDomElement(),n=s.stringFormat(s.tooltipOptions.content,t);""!==n&&(a.html(n),i.setTooltipPosition({x:o.pageX,y:o.pageY}),a.css({left:s.tipPosition.x+s.tooltipOptions.shifts.x,top:s.tipPosition.y+s.tooltipOptions.shifts.y}).show(),"function"==typeof s.tooltipOptions.onHover&&s.tooltipOptions.onHover(t,a))},i.hideTooltip=function(){s.getDomElement().hide().html("")}},o.prototype.getDomElement=function(){var i=t("."+this.tooltipOptions.cssClass);return 0===i.length&&(i=t("<div />").addClass(this.tooltipOptions.cssClass),i.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&i.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),i},o.prototype.stringFormat=function(t,i){var o,e,s,a,n,r=/%p\.{0,1}(\d{0,})/,p=/%s/,l=/%c/,d=/%lx/,x=/%ly/,c=/%x\.{0,1}(\d{0,})/,h=/%y\.{0,1}(\d{0,})/;if(void 0!==i.series.threshold?(o=i.datapoint[0],e=i.datapoint[1],s=i.datapoint[2]):void 0!==i.series.curvedLines?(o=i.datapoint[0],e=i.datapoint[1]):void 0!==i.series.lines&&i.series.lines.steps?(o=i.series.datapoints.points[2*i.dataIndex],e=i.series.datapoints.points[2*i.dataIndex+1],s=""):(o=i.series.data[i.dataIndex][0],e=i.series.data[i.dataIndex][1],s=i.series.data[i.dataIndex][2]),null===i.series.label&&i.series.originSeries&&(i.series.label=i.series.originSeries.label),"function"==typeof t&&(t=t(i.series.label,o,e,i)),"boolean"==typeof t&&!t)return"";if(s&&(t=t.replace("%ct",s)),void 0!==i.series.percent?a=i.series.percent:void 0!==i.series.percents&&(a=i.series.percents[i.dataIndex]),"number"==typeof a&&(t=this.adjustValPrecision(r,t,a)),i.series.hasOwnProperty("pie")&&(n=i.series.data[0][1]),"number"==typeof n&&(t=t.replace("%n",n)),t=void 0!==i.series.label?t.replace(p,i.series.label):t.replace(p,""),t=void 0!==i.series.color?t.replace(l,i.series.color):t.replace(l,""),t=this.hasAxisLabel("xaxis",i)?t.replace(d,i.series.xaxis.options.axisLabel):t.replace(d,""),t=this.hasAxisLabel("yaxis",i)?t.replace(x,i.series.yaxis.options.axisLabel):t.replace(x,""),this.isTimeMode("xaxis",i)&&this.isXDateFormat(i)&&(t=t.replace(c,this.timestampToDate(o,this.tooltipOptions.xDateFormat,i.series.xaxis.options))),this.isTimeMode("yaxis",i)&&this.isYDateFormat(i)&&(t=t.replace(h,this.timestampToDate(e,this.tooltipOptions.yDateFormat,i.series.yaxis.options))),"number"==typeof o&&(t=this.adjustValPrecision(c,t,o)),"number"==typeof e&&(t=this.adjustValPrecision(h,t,e)),void 0!==i.series.xaxis.ticks){var u;u=this.hasRotatedXAxisTicks(i)?"rotatedTicks":"ticks";var y=i.dataIndex+i.seriesIndex;for(var m in i.series.xaxis[u])if(i.series.xaxis[u].hasOwnProperty(y)&&!this.isTimeMode("xaxis",i)){var f=this.isCategoriesMode("xaxis",i)?i.series.xaxis[u][y].label:i.series.xaxis[u][y].v;f===o&&(t=t.replace(c,i.series.xaxis[u][y].label))}}if(void 0!==i.series.yaxis.ticks)for(var v in i.series.yaxis.ticks)if(i.series.yaxis.ticks.hasOwnProperty(v)){var g=this.isCategoriesMode("yaxis",i)?i.series.yaxis.ticks[v].label:i.series.yaxis.ticks[v].v;g===e&&(t=t.replace(h,i.series.yaxis.ticks[v].label))}return void 0!==i.series.xaxis.tickFormatter&&(t=t.replace("%x",i.series.xaxis.tickFormatter(o,i.series.xaxis).replace(/\$/g,"$$"))),void 0!==i.series.yaxis.tickFormatter&&(t=t.replace("%y",i.series.yaxis.tickFormatter(e,i.series.yaxis).replace(/\$/g,"$$"))),t},o.prototype.isTimeMode=function(t,i){return void 0!==i.series[t].options.mode&&"time"===i.series[t].options.mode},o.prototype.isXDateFormat=function(t){return void 0!==this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},o.prototype.isYDateFormat=function(t){return void 0!==this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},o.prototype.isCategoriesMode=function(t,i){return void 0!==i.series[t].options.mode&&"categories"===i.series[t].options.mode},o.prototype.timestampToDate=function(i,o,e){var s=t.plot.dateGenerator(i,e);return t.plot.formatDate(s,o,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},o.prototype.adjustValPrecision=function(t,i,o){var e;return null!==i.match(t)&&""!==RegExp.$1&&(e=RegExp.$1,o=o.toFixed(e),i=i.replace(t,o)),i},o.prototype.hasAxisLabel=function(i,o){return-1!==t.inArray(this.plotPlugins,"axisLabels")&&void 0!==o.series[i].options.axisLabel&&o.series[i].options.axisLabel.length>0},o.prototype.hasRotatedXAxisTicks=function(i){return-1!==t.inArray(this.plotPlugins,"tickRotor")&&void 0!==i.series.xaxis.rotatedTicks};var e=function(t){new o(t)};t.plot.plugins.push({init:e,options:i,name:"tooltip",version:"0.8.5"})}(jQuery);